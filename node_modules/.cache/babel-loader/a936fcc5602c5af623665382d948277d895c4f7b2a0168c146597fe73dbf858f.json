{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Aljo\\\\OneDrive\\\\Desktop\\\\New folder\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport HabitList from './components/HabitList';\nimport HabitForm from './components/HabitForm';\nimport Login from './components/Login';\nimport { auth, db } from './firebase';\nimport { collection, query, where, addDoc, updateDoc, doc, onSnapshot } from 'firebase/firestore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [habits, setHabits] = useState([]);\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    try {\n      const unsubscribe = auth.onAuthStateChanged(async user => {\n        if (user) {\n          console.log('User logged in:', user.email); // Debug log\n          setUser(user.email);\n          const habitsQuery = query(collection(db, 'habits'), where('userEmail', '==', user.email));\n          const unsubscribeSnapshot = onSnapshot(habitsQuery, snapshot => {\n            console.log('Snapshot received:', snapshot.size); // Debug log\n            const habitsData = snapshot.docs.map(doc => ({\n              id: doc.id,\n              ...doc.data()\n            }));\n            console.log('Habits data:', habitsData); // Debug log\n            setHabits(habitsData);\n          }, error => {\n            console.error('Snapshot error:', error);\n            setError(error.message);\n          });\n          return () => {\n            unsubscribeSnapshot();\n            console.log('Unsubscribed from habits'); // Debug log\n          };\n        } else {\n          console.log('User logged out'); // Debug log\n          setUser(null);\n          setHabits([]);\n        }\n      });\n      return () => unsubscribe();\n    } catch (error) {\n      console.error('Auth error:', error);\n      setError(error.message);\n    }\n  }, []);\n  const addHabit = async habitName => {\n    try {\n      console.log('Adding habit:', habitName); // Debug log\n      const newHabit = {\n        name: habitName,\n        completed: false,\n        streak: 0,\n        lastCompleted: null,\n        userEmail: user,\n        createdAt: new Date().toISOString()\n      };\n      const docRef = await addDoc(collection(db, 'habits'), newHabit);\n      console.log('Habit added with ID:', docRef.id); // Debug log\n    } catch (error) {\n      console.error('Error adding habit:', error);\n      setError(error.message);\n    }\n  };\n  const toggleHabit = async id => {\n    try {\n      console.log('Toggling habit:', id); // Debug log\n      const habitRef = doc(db, 'habits', id);\n      const habit = habits.find(h => h.id === id);\n      if (!habit) {\n        throw new Error('Habit not found');\n      }\n      const today = new Date().toDateString();\n      const isCompleted = !habit.completed;\n      await updateDoc(habitRef, {\n        completed: isCompleted,\n        streak: isCompleted ? habit.streak + 1 : habit.streak - 1,\n        lastCompleted: isCompleted ? today : habit.lastCompleted,\n        updatedAt: new Date().toISOString()\n      });\n      console.log('Habit updated successfully'); // Debug log\n    } catch (error) {\n      console.error('Error updating habit:', error);\n      setError(error.message);\n    }\n  };\n  const handleLogout = async () => {\n    await auth.signOut();\n  };\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Login, {\n      onLogin: setUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Habit Tracker\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"user-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Welcome, \", user, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleLogout,\n          className: \"logout-btn\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HabitForm, {\n      onAdd: addHabit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(HabitList, {\n      habits: habits,\n      onToggle: toggleHabit\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"sDELqUpKMWX6Ya9aODThEG+6Gv0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","HabitList","HabitForm","Login","auth","db","collection","query","where","addDoc","updateDoc","doc","onSnapshot","jsxDEV","_jsxDEV","App","_s","habits","setHabits","user","setUser","error","setError","unsubscribe","onAuthStateChanged","console","log","email","habitsQuery","unsubscribeSnapshot","snapshot","size","habitsData","docs","map","id","data","message","addHabit","habitName","newHabit","name","completed","streak","lastCompleted","userEmail","createdAt","Date","toISOString","docRef","toggleHabit","habitRef","habit","find","h","Error","today","toDateString","isCompleted","updatedAt","handleLogout","signOut","onLogin","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onClick","onAdd","onToggle","_c","$RefreshReg$"],"sources":["C:/Users/Aljo/OneDrive/Desktop/New folder/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './App.css';\r\nimport HabitList from './components/HabitList';\r\nimport HabitForm from './components/HabitForm';\r\nimport Login from './components/Login';\r\nimport { auth, db } from './firebase';\r\nimport { collection, query, where, addDoc, updateDoc, doc, onSnapshot } from 'firebase/firestore';\r\n\r\nfunction App() {\r\n  const [habits, setHabits] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const unsubscribe = auth.onAuthStateChanged(async (user) => {\r\n        if (user) {\r\n          console.log('User logged in:', user.email); // Debug log\r\n          setUser(user.email);\r\n          \r\n          const habitsQuery = query(\r\n            collection(db, 'habits'),\r\n            where('userEmail', '==', user.email)\r\n          );\r\n          \r\n          const unsubscribeSnapshot = onSnapshot(habitsQuery, \r\n            (snapshot) => {\r\n              console.log('Snapshot received:', snapshot.size); // Debug log\r\n              const habitsData = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n              }));\r\n              console.log('Habits data:', habitsData); // Debug log\r\n              setHabits(habitsData);\r\n            },\r\n            (error) => {\r\n              console.error('Snapshot error:', error);\r\n              setError(error.message);\r\n            }\r\n          );\r\n\r\n          return () => {\r\n            unsubscribeSnapshot();\r\n            console.log('Unsubscribed from habits'); // Debug log\r\n          };\r\n        } else {\r\n          console.log('User logged out'); // Debug log\r\n          setUser(null);\r\n          setHabits([]);\r\n        }\r\n      });\r\n\r\n      return () => unsubscribe();\r\n    } catch (error) {\r\n      console.error('Auth error:', error);\r\n      setError(error.message);\r\n    }\r\n  }, []);\r\n\r\n  const addHabit = async (habitName) => {\r\n    try {\r\n      console.log('Adding habit:', habitName); // Debug log\r\n      const newHabit = {\r\n        name: habitName,\r\n        completed: false,\r\n        streak: 0,\r\n        lastCompleted: null,\r\n        userEmail: user,\r\n        createdAt: new Date().toISOString()\r\n      };\r\n      \r\n      const docRef = await addDoc(collection(db, 'habits'), newHabit);\r\n      console.log('Habit added with ID:', docRef.id); // Debug log\r\n    } catch (error) {\r\n      console.error('Error adding habit:', error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const toggleHabit = async (id) => {\r\n    try {\r\n      console.log('Toggling habit:', id); // Debug log\r\n      const habitRef = doc(db, 'habits', id);\r\n      const habit = habits.find(h => h.id === id);\r\n      \r\n      if (!habit) {\r\n        throw new Error('Habit not found');\r\n      }\r\n\r\n      const today = new Date().toDateString();\r\n      const isCompleted = !habit.completed;\r\n      \r\n      await updateDoc(habitRef, {\r\n        completed: isCompleted,\r\n        streak: isCompleted ? habit.streak + 1 : habit.streak - 1,\r\n        lastCompleted: isCompleted ? today : habit.lastCompleted,\r\n        updatedAt: new Date().toISOString()\r\n      });\r\n      console.log('Habit updated successfully'); // Debug log\r\n    } catch (error) {\r\n      console.error('Error updating habit:', error);\r\n      setError(error.message);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await auth.signOut();\r\n  };\r\n\r\n  if (!user) {\r\n    return <Login onLogin={setUser} />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header>\r\n        <h1>Habit Tracker</h1>\r\n        <div className=\"user-info\">\r\n          <span>Welcome, {user}!</span>\r\n          <button onClick={handleLogout} className=\"logout-btn\">Logout</button>\r\n        </div>\r\n      </header>\r\n      <HabitForm onAdd={addHabit} />\r\n      <HabitList habits={habits} onToggle={toggleHabit} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}